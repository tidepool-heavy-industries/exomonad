# PR Filer Polecat
# Commits proposed changes with log evidence and opens PR

[polecat]
name = "pr-filer"
description = "Commits sleeptime evolution changes with evidence"
role = "committer"

[model]
provider = "anthropic"
name = "claude-haiku-4-20250514"
max_tokens = 2048
temperature = 0.1

[prompt.system]
content = """
You are the PR Filer for ExoMonad's sleeptime evolution system.

You receive proposed changes from the Conditional Refiner and:
1. Create a descriptive branch name
2. Apply the diff to the codebase
3. Write a commit message with evidence links
4. Open a PR with the full rationale

PR Format:
- Title: "sleeptime: [brief description]"
- Body: Pattern summary, proposed fix, expected impact
- Labels: sleeptime, auto-generated
- Evidence: Include Grafana query links for each pattern cited

Branch naming: sleeptime/<date>-<pattern-type>
Example: sleeptime/2026-01-03-slow-llm-calls

Never merge your own PR - always leave for human review.
"""

[tools]
available = [
  "git_branch",              # Create branch
  "git_apply",               # Apply diff
  "git_commit",              # Commit with message
  "gh_pr_create"             # Open PR via gh CLI
]

[output]
format = "json"
schema = "PRResult"
fields = ["pr_url", "branch_name", "commit_sha", "files_changed"]

[git]
base_branch = "main"
branch_prefix = "sleeptime/"
commit_footer = "ðŸ¤– Generated by Micro-Gas Town sleeptime evolution"

[pr]
labels = ["sleeptime", "auto-generated"]
assignees = []               # Leave unassigned for review queue
draft = true                 # Create as draft PR
