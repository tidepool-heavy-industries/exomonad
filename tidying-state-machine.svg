<svg viewBox="0 0 800 480" xmlns="http://www.w3.org/2000/svg">
  <style>
    .phase { fill: #1a1a1a; stroke: #c9a227; stroke-width: 2; }
    .phase-label { fill: #fff; font-family: monospace; font-size: 13px; text-anchor: middle; dominant-baseline: middle; }
    .detail { fill: #888; font-family: monospace; font-size: 9px; text-anchor: middle; }
    .edge { stroke: #666; stroke-width: 1.5; fill: none; marker-end: url(#arrow); }
    .edge-main { stroke: #c9a227; stroke-width: 2; fill: none; marker-end: url(#arrow-gold); }
    .edge-back { stroke: #4a7c4a; stroke-width: 1.5; fill: none; marker-end: url(#arrow-green); }
    .edge-label { fill: #888; font-family: monospace; font-size: 9px; }
    .edge-label-main { fill: #c9a227; font-family: monospace; font-size: 9px; }
    .note-box { fill: #0d0d0d; stroke: #333; stroke-width: 1; }
    .note-text { fill: #666; font-family: monospace; font-size: 10px; }
    .section-label { fill: #555; font-family: monospace; font-size: 11px; font-weight: bold; }
  </style>

  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#666"/>
    </marker>
    <marker id="arrow-gold" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#c9a227"/>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4a7c4a"/>
    </marker>
  </defs>

  <!-- Title -->
  <text class="section-label" x="400" y="20">TIDYING AGENT</text>

  <!-- ============== SURVEYING ============== -->
  <rect class="phase" x="50" y="60" width="150" height="70" rx="6"/>
  <text class="phase-label" x="125" y="80">SURVEYING</text>
  <text class="detail" x="125" y="100">photos</text>
  <text class="detail" x="125" y="112">function + anchors</text>

  <!-- Self-loop surveying -->
  <path class="edge" d="M 70 60 Q 70 30 125 30 Q 180 30 180 60"/>
  <text class="edge-label" x="125" y="22">clarify</text>

  <!-- ============== SORTING ============== -->
  <rect class="phase" x="270" y="60" width="150" height="70" rx="6"/>
  <text class="phase-label" x="345" y="80">SORTING</text>
  <text class="detail" x="345" y="100">belongs | out | unsure</text>
  <text class="detail" x="345" y="112">atomic: "put X in Y"</text>

  <!-- Edge: surveying → sorting -->
  <path class="edge-main" d="M 200 95 L 270 95"/>
  <text class="edge-label-main" x="235" y="88">ready</text>

  <!-- ============== SPLITTING ============== -->
  <rect class="phase" x="490" y="60" width="150" height="70" rx="6"/>
  <text class="phase-label" x="565" y="80">SPLITTING</text>
  <text class="detail" x="565" y="100">unsure too big?</text>
  <text class="detail" x="565" y="112">→ emergent category</text>

  <!-- Edge: sorting → splitting -->
  <path class="edge-main" d="M 420 95 L 490 95"/>
  <text class="edge-label-main" x="455" y="88">grows</text>

  <!-- ============== REFINING ============== -->
  <rect class="phase" x="610" y="170" width="130" height="70" rx="6"/>
  <text class="phase-label" x="675" y="190">REFINING</text>
  <text class="detail" x="675" y="210">sub-piles</text>
  <text class="detail" x="675" y="222">place keepers</text>

  <!-- Edge: splitting → refining -->
  <path class="edge-main" d="M 600 130 L 650 170"/>
  <text class="edge-label-main" x="640" y="145">sorted</text>

  <!-- Edge: refining → sorting (loop back) -->
  <path class="edge-back" d="M 610 205 Q 480 205 420 130"/>
  <text class="edge-label" x="500" y="195" style="fill: #4a7c4a;">next pass</text>

  <!-- Edge: splitting → sorting (continue) -->
  <path class="edge-back" d="M 490 120 Q 420 150 370 130"/>
  <text class="edge-label" x="420" y="148" style="fill: #4a7c4a;">continue</text>

  <!-- ============== DECISION_SUPPORT ============== -->
  <rect class="phase" x="200" y="200" width="180" height="70" rx="6"/>
  <text class="phase-label" x="290" y="220">DECISION_SUPPORT</text>
  <text class="detail" x="290" y="240">"garage is for X.</text>
  <text class="detail" x="290" y="252">does this support that?"</text>

  <!-- Edge: sorting → decision_support -->
  <path class="edge" d="M 320 130 L 300 200"/>
  <text class="edge-label" x="295" y="165">stuck</text>

  <!-- Edge: decision_support → sorting -->
  <path class="edge-back" d="M 340 200 L 360 130"/>
  <text class="edge-label" x="365" y="165" style="fill: #4a7c4a;">resolved</text>

  <!-- ============== OODA NOTE ============== -->
  <rect class="note-box" x="50" y="310" width="700" height="70" rx="6"/>
  <text class="section-label" x="80" y="335">OODA (each input)</text>
  <text class="note-text" x="70" y="355">OBSERVE: photo(s), text, progress, "stuck"</text>
  <text class="note-text" x="70" y="372">ORIENT → DECIDE → ACT: instruction / question / split / decision_aid</text>

  <!-- ============== KEY INSIGHT ============== -->
  <rect class="note-box" x="50" y="395" width="700" height="45" rx="6"/>
  <text class="section-label" x="80" y="415">NO UPFRONT SCHEMA</text>
  <text class="note-text" x="230" y="415">function + anchors → belongs/out/unsure → dynamic splits → refinement</text>

</svg>
