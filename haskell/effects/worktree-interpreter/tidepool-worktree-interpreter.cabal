cabal-version:      3.0
name:               tidepool-worktree-interpreter
version:            0.1.0.0
synopsis:           Worktree effect interpreter - git worktree management
description:
    Implements Worktree effect by calling git commands.
    .
    Enables graphs to manage isolated git worktrees for parallel agent execution.
    Each worktree gets its own branch and working directory, allowing multiple
    Claude Code sessions to work in parallel without conflicts.
license:            MIT
author:             Inanna
build-type:         Simple

common warnings
    ghc-options: -Wall -Wincomplete-patterns -Wredundant-constraints -Wunused-packages

library
    import:           warnings
    exposed-modules:
        Tidepool.Worktree.Interpreter
    build-depends:
        base >= 4.17 && < 5,
        freer-simple >= 1.2 && < 2,
        text >= 2.0 && < 3,
        process >= 1.6 && < 2,
        filepath >= 1.4 && < 2,
        directory >= 1.3 && < 2,
        random >= 1.2 && < 2,
        tidepool-core
    hs-source-dirs:   src
    default-language: GHC2021
    default-extensions:
        DataKinds
        DeriveGeneric
        DerivingStrategies
        GADTs
        LambdaCase
        OverloadedStrings
        OverloadedRecordDot
        TypeFamilies
        TypeOperators

test-suite worktree-interpreter-test
    type:             exitcode-stdio-1.0
    main-is:          Main.hs
    other-modules:
        Tidepool.Worktree.ParseSpec
        Tidepool.Worktree.InterpreterSpec
    hs-source-dirs:   test
    default-language: GHC2021
    default-extensions:
        OverloadedStrings
        OverloadedRecordDot
    build-depends:
        base >= 4.17 && < 5,
        tidepool-core,
        tidepool-worktree-interpreter,
        freer-simple >= 1.2 && < 2,
        filepath >= 1.4 && < 2,
        directory >= 1.3 && < 2,
        process >= 1.6 && < 2,
        text >= 2.0 && < 3,
        hspec >= 2.10 && < 3
    ghc-options:      -threaded -rtsopts -with-rtsopts=-N
