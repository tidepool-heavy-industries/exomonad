cabal-version:      3.0
name:               tidepool-mcp-server
version:            0.1.0.0
synopsis:           MCP (Model Context Protocol) server for exposing LLMNode as tools
description:        MCP stdio server that exposes Tidepool LLMNode definitions as
                    type-safe MCP tools. Uses mcp-server library for protocol handling.
license:            MIT
author:             Inanna
build-type:         Simple

common defaults
    ghc-options: -Wall -Wincomplete-patterns -Wredundant-constraints -Wunused-packages
    default-language: GHC2024
    default-extensions:
        DataKinds
        DeriveAnyClass
        DeriveGeneric
        DerivingStrategies
        DuplicateRecordFields
        GADTs
        LambdaCase
        NoFieldSelectors
        OverloadedRecordDot
        OverloadedStrings
        TypeFamilies
        TypeOperators
        TemplateHaskell

library
    import:           defaults
    exposed-modules:
        Tidepool.MCP.Server
        Tidepool.MCP.Types
    build-depends:
        base >= 4.17 && < 5,
        aeson >= 2.1 && < 3,
        text >= 2.0 && < 3,
        bytestring >= 0.11 && < 1,
        mcp-server >= 0.1 && < 0.2,
        template-haskell >= 2.16 && < 2.24,
        tidepool-core,
        tidepool-llm-interpreter,
        freer-simple >= 1.2 && < 2
    hs-source-dirs:   src

executable mcp-server-example
    import:           defaults
    main-is:          Main.hs
    build-depends:
        base,
        aeson >= 2.1 && < 3,
        tidepool-mcp-server,
        tidepool-core,
        text
    hs-source-dirs:   app
