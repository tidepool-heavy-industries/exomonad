{# Only show uncommitted changes warning when blocking (no PR filed yet) #}
{% if dirty_files and not pr %}
## Uncommitted Changes

The following files have uncommitted changes:
{% for f in dirty_files %}
- `{{ f }}`
{% endfor %}

Commit these changes before stopping. Use structured commit metadata:
```
git add <files>
git commit -m "[{{ bead_id | default(branch) }}] <type>: <description>"
git push
```
{% endif %}

{% if commits_ahead > 0 and not pr %}
## Ready for PR

You have {{ commits_ahead }} commit(s) on `{{ branch }}` not yet in a PR.

Use the `file_pr` MCP tool to create a pull request:
- **testing** (required): How did you verify this works?
- **compromises** (optional): Any tradeoffs or known limitations?

The tool will infer bead ID and title from your branch.
{% endif %}

{# TODO: Wire pr_review_status to fetch actual pending_comments count #}

{% if pr %}
## PR Filed
{% if dirty_files %}
✓ PR #{{ pr.number }} filed. You have local uncommitted changes (not blocking since PR exists).
{% else %}
✓ PR #{{ pr.number }} is up to date.
{% endif %}
{% endif %}

{% if clean and not bead_id %}
✓ Clean state. Not on a bead branch.
{% endif %}

{% if clean and bead_id and pr %}
✓ {{ bead_id }}: All changes committed, PR #{{ pr.number }} filed.
{% endif %}
