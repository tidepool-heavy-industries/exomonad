cabal-version: 3.0
name: tidepool-semantic-scout
version: 0.1.0.0
synopsis: Semantic code scout exposed as MCP tool
description:
  Semantic code exploration using FunctionGemma as coalgebra.
  The model handles one edge at a time; the exploration loop handles recursion.
  Exposed as MCP tool for Claude Code integration.
license: MIT
author: Tidepool
maintainer: noreply@tidepool.com
category: Development
build-type: Simple

data-files:
  templates/*.jinja

common warnings
  ghc-options: -Wall -Wcompat -Wno-orphans

library
  import: warnings
  exposed-modules:
    Tidepool.Agents.Scout.Types
    Tidepool.Agents.Scout.EdgeTypes
    Tidepool.Agents.Scout.Scoring
    Tidepool.Agents.Scout.Templates
    Tidepool.Agents.Scout.Explore
    Tidepool.Agents.Scout.Gemma
    Tidepool.Agents.Scout.Graph
    Tidepool.Agents.Scout.Heuristics
    Tidepool.Agents.Scout.LSP
  hs-source-dirs: src
  default-language: GHC2021
  default-extensions:
    DeriveAnyClass
    DeriveGeneric
    DerivingStrategies
    OverloadedStrings
    OverloadedRecordDot
    RecordWildCards
    DataKinds
    TypeFamilies
    TypeOperators
    LambdaCase

  build-depends:
      base >= 4.17 && < 5
    , aeson >= 2.1 && < 3
    , bytestring >= 0.11 && < 1
    , containers >= 0.6 && < 1
    , directory
    , freer-simple
    , http-conduit >= 2.3 && < 3
    , pqueue >= 1.4 && < 2
    , text >= 2.0 && < 3
    , tidepool-core
    , tidepool-lsp-interpreter
    , tidepool-training-generator
    , vector

executable semantic-scout
  import: warnings
  main-is: Main.hs
  hs-source-dirs: src
  other-modules:
    Tidepool.Agents.Scout.Types
    Tidepool.Agents.Scout.EdgeTypes
    Tidepool.Agents.Scout.Scoring
    Tidepool.Agents.Scout.Templates
    Tidepool.Agents.Scout.Explore
    Tidepool.Agents.Scout.Gemma
    Tidepool.Agents.Scout.Graph
    Tidepool.Agents.Scout.Heuristics
    Tidepool.Agents.Scout.LSP
  default-language: GHC2021
  default-extensions:
    DeriveAnyClass
    DeriveGeneric
    DerivingStrategies
    OverloadedStrings
    OverloadedRecordDot
    TypeApplications
    DataKinds
    TypeFamilies
    TypeOperators
    LambdaCase
  ghc-options: -threaded -rtsopts -with-rtsopts=-N

  build-depends:
      base >= 4.17 && < 5
    , aeson >= 2.1 && < 3
    , bytestring >= 0.11 && < 1
    , containers >= 0.6 && < 1
    , directory
    , freer-simple
    , http-conduit >= 2.3 && < 3
    , pqueue >= 1.4 && < 2
    , text >= 2.0 && < 3
    , tidepool-core
    , tidepool-lsp-interpreter
    , tidepool-semantic-scout
    , tidepool-training-generator
    , tidepool-mcp-server
    , vector
