packages:
    -- Core DSL
    haskell/dsl/core

    -- Runtime
    haskell/runtime/wasm
    haskell/runtime/actor
    haskell/runtime/parallel
    haskell/platform

    -- Effect interpreters
    haskell/effects/llm-executor
    haskell/effects/bd-executor
    haskell/effects/habitica-executor
    haskell/effects/ui-executor
    haskell/effects/observability-executor
    haskell/effects/lsp-executor
    haskell/effects/ghci-executor
    haskell/effects/github-executor
    haskell/effects/worktree-executor
    haskell/effects/session-executor
    haskell/effects/cabal-executor
    haskell/effects/devlog-executor

    -- Effect types (standalone)
    haskell/effects/habitica

    -- Protocol
    haskell/protocol/wire-types
    haskell/protocol/generated-ts

    -- Native server
    haskell/native-server

    -- Tools
    haskell/tools/sleeptime

    -- Test/example packages
    claude-code-test
    -- types-first-dev  -- TODO: needs migration from ClaudeCodeExec to Session effect

    -- Vendored dependencies
    haskell/vendor/freer-simple
    haskell/vendor/ginger

-- Disabled packages:
-- template            -- unused template skeleton
-- tidepool-telegram-hs -- types only, not used by tidepool-wasm

-- Use GHC 9.6+ for best GHC2021 support
-- with-compiler: ghc-9.6

-- Allow newer for effectful ecosystem
allow-newer: all

-- Fast builds by default (no optimizations)
-- Use `cabal build -O1` or `-O2` for release builds
optimization: 0

-- Use nix zlib (compatible with nix GHC toolchain)
package zlib
  extra-lib-dirs: /nix/store/l7xwm1f6f3zj2x8jwdbi8gdyfbx07sh7-zlib-1.3.1/lib
  extra-include-dirs: /nix/store/hqvsiah013yzb17b13fn18fpqk7m13cg-zlib-1.3.1-dev/include

-- Vendored forks (see deps/):
-- - ginger: typed templates + dependency tracking (tree API)
--   upstream: https://github.com/inanna-malick/ginger @ 25af8c8
-- - freer-simple: GHC 9.10/9.12 compatibility (PR #45, not yet merged upstream)
--   upstream: https://github.com/georgefst/freer-simple @ e1d88c1
