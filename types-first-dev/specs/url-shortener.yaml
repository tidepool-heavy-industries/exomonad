# Simple URL Shortener
#
# Minimal spec for testing the decision tool flow.

id: url-shortener

description: |
  A simple URL shortener with Servant API and TVar-based storage, built using Stack.

target_path: src/UrlShortener
test_path: test/UrlShortener

acceptance_criteria:
  - |
    Domain types:
    - ShortCode newtype (6-character string)
    - LongUrl newtype (Text)
    - UrlMapping record (ShortCode, LongUrl, created timestamp)

  - |
    Storage module with TVar-based state:
    - createStore :: IO (TVar (Map ShortCode UrlMapping))
    - storeUrl :: TVar ... -> LongUrl -> IO ShortCode
    - lookupUrl :: TVar ... -> ShortCode -> IO (Maybe LongUrl)

  - |
    Servant API:
    - POST /shorten (body: LongUrl, returns: ShortCode)
    - GET /:code (returns: 302 redirect to LongUrl)
    - GET /health (returns: 200 OK)
