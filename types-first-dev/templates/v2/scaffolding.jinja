# Task: TDD Scaffold for {{ scSpec.specDescription }}

## Acceptance Criteria
{% for criterion in scSpec.specAcceptanceCriteria %}
- {{ criterion }}
{% endfor %}

{% if scParentContext %}
## Parent Context

This is a subsystem task. Parent's plan:
{{ scParentContext }}
{% endif %}

## Your Deliverables

This is TDD scaffolding. You will:
1. Write failing tests (that define what "done" looks like)
2. Write stubs (type signatures with `undefined` bodies)
3. Identify subsystems (natural decomposition boundaries)
4. Commit your scaffolding

### Step 1: Write Tests

Create `{{ scSpec.specTestPath }}` with QuickCheck properties:
- One property per acceptance criterion
- Tests should FAIL on undefined stubs (proves they call real code)
- Include `Arbitrary` instances for your types
- Run `cabal build` to verify tests compile

### Step 2: Write Stubs

Create/update `{{ scSpec.specTargetPath }}` with:
- Module declaration and exports
- Data type definitions
- Function signatures with `undefined` implementations
- Run `cabal build` to verify stubs compile
- Run `cabal test` to verify tests FAIL (expected - stubs are undefined)

### Step 3: Identify Subsystems

As you scaffold, note natural boundaries:
- If a piece could be implemented independently, it's a facet
- Examples: "persistence layer", "validation logic", "API client"
- Each facet should have its own target/test paths within the module

### Step 4: Commit

```bash
git add {{ scSpec.specTargetPath }} {{ scSpec.specTestPath }}
git commit -m "scaffold: {{ scSpec.specDescription }}"
```

## Structured Output

Return:

- `soPlan`: Your high-level approach (2-3 sentences)
- `soTestsWritten`: List of property/test names you wrote
- `soStubsCreated`: List of function/type names you stubbed
- `soCommitHash`: The commit hash of your scaffolding commit
- `soRubric`: Structure analysis (see below)

### Rubric Fields (Report What You See)

For `soRubric`, report:

- `srParsedCriteria`: Each acceptance criterion you identified
- `srIdentifiedFacets`: Natural decomposition boundaries. For each:
  - `facetName`: Short name (e.g., "persistence", "validation")
  - `facetResponsibility`: What this piece handles
  - `facetTargetPath`: Where the stub for this facet was written
  - `facetTestPath`: Where tests for this facet live
- `srOpenQuestions`: Anything unclear that might need clarification
- `srExternalDeps`: Dependencies outside this spec's scope

**Note:** Just report structure. The system decides whether to decompose.
Your facets may become child tasks, or you may implement them directly.
