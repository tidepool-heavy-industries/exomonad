You are designing a Servant API type for a Haskell webserver.

## Task

Design the API type and data types for: {{ moduleName }}

## Description

{{ description }}

{% if acceptanceCriteria %}
## Acceptance Criteria

The implementation must satisfy these requirements:

{% for criterion in acceptanceCriteria %}
- {{ criterion }}
{% endfor %}

Use these criteria to inform your testPriorities output.
{% endif %}

## Requirements

1. Design a Servant API type using type-level combinators (:>, :<|>, etc.)
2. Design all request/response data types with JSON instances
3. Design handler function signatures matching the API
4. Include test priorities for integration testing

## Servant API Type Syntax

```haskell
-- Example API combining multiple endpoints
type MyAPI =
       "endpoint1" :> ReqBody '[JSON] Request1 :> Post '[JSON] Response1
  :<|> "endpoint2" :> Capture "id" Text :> Get '[JSON] Response2
  :<|> "endpoint3" :> QueryParam "q" Text :> Get '[JSON] [Result]
```

## Output Format

**CRITICAL**: Your structured output must use OBJECTS, not strings.

Each element in `tdSignatures` must be an OBJECT with three fields:
- `fsName` (string): Handler function name (e.g., "shortenHandler")
- `fsSignature` (string): Handler type signature WITHOUT state/IORef parameters. Just the API inputs and Handler output. Example: "ShortenRequest -> Handler ShortUrl" NOT "IORef State -> ShortenRequest -> Handler ShortUrl"
- `fsDescription` (string): Brief description of what this handler does

Each element in `tdTestPriorities` must be an OBJECT with two fields:
- `tpName` (string): Property name in snake_case (e.g., "roundtrip_shorten_expand")
- `tpDescription` (string): What to test via HTTP client

**Example output:**
```json
{
  "tdTypeName": "ShortenerAPI",
  "tdDataType": "type ShortenerAPI =\n       \"shorten\" :> ReqBody '[JSON] ShortenRequest :> Post '[JSON] ShortUrl\n  :<|> Capture \"code\" ShortCode :> Get '[JSON] ExpandResult\n  :<|> Capture \"code\" ShortCode :> \"stats\" :> Get '[JSON] Stats",
  "tdSignatures": [
    {
      "fsName": "shortenHandler",
      "fsSignature": "ShortenRequest -> Handler ShortUrl",
      "fsDescription": "Create a short URL from a long URL"
    },
    {
      "fsName": "expandHandler",
      "fsSignature": "ShortCode -> Handler ExpandResult",
      "fsDescription": "Expand a short code to the original URL"
    },
    {
      "fsName": "statsHandler",
      "fsSignature": "ShortCode -> Handler Stats",
      "fsDescription": "Get usage statistics for a short code"
    }
  ],
  "tdTestPriorities": [
    {
      "tpName": "roundtrip_shorten_expand",
      "tpDescription": "Shorten a URL then expand it - should return original"
    },
    {
      "tpName": "idempotent_shorten",
      "tpDescription": "Shortening same URL twice returns same short code"
    }
  ],
  "tdImports": []
}
```

## Requesting Additional Imports

The skeleton includes basic imports (Text, Generic, FromJSON, ToJSON, Servant, etc.).

If you need additional types or typeclasses, add them to `tdImports` as full import statements:
```json
"tdImports": [
  "import Data.Time (UTCTime)",
  "import Data.ByteString (ByteString)",
  "import Data.Hashable (Hashable)"
]
```

**Always available** (no import needed):
- Text, Int, Bool, Maybe
- Generic, FromJSON, ToJSON, Eq, Ord, Show
- Handler, ReqBody, Capture, QueryParam, Get, Post, Put, Delete, (:<|>), (:>)
- FromHttpApiData, ToHttpApiData

## Data Types to Include

In `tdDataType`, include the API type AND all data type definitions:
- Request types (e.g., ShortenRequest)
- Response types (e.g., ShortUrl, ExpandResult, Stats)
- Newtypes for type safety (e.g., ShortCode)

**CRITICAL: Use this exact deriving pattern for all data types:**
```haskell
data ShortenRequest = ShortenRequest
  { srUrl :: Text
  }
  deriving stock (Show, Eq, Generic)
  deriving anyclass (FromJSON, ToJSON)

newtype ShortCode = ShortCode { unShortCode :: Text }
  deriving stock (Show, Eq, Generic)
  deriving anyclass (FromJSON, ToJSON)
  deriving newtype (FromHttpApiData, ToHttpApiData)
```

DO NOT use `deriving via Generic X` - that is incorrect syntax and will not compile.

## Your Task

Design the API and data types for {{ moduleName }} based on the description above.
